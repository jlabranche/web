!function($){$.fn.modal_projects=function(){return this.each(function(){var r=$(this);r.on("show.bs.modal",function(){$("#accordion-projects").empty();for(var r in board.project_records){var o=board.project_records[r];o.task_count=0;for(var a in board.task_records)board.task_records[a].project_id==o.id&&o.task_count++;var t=$(t_modal_projects_panel.render(o));t.appendTo("#accordion-projects")}}),r.on("click",".btn-delete",function(){var r=$(this),o=r.closest(".panel"),a=o.attr("data-id"),t=JSON.parse(JSON.stringify(board.project_records[a]));t.action="delete_project",t.kanban_nonce=$("#kanban_nonce").val(),$.ajax({method:"POST",url:ajaxurl,data:t}).done(function(r){delete board.project_records[a];for(var t in board.task_records)board.task_records[t].project_id==a&&(task_records[t].project_id=0,$("#task-"+board.task_records[t].ID).trigger("save").trigger("populate_project"));o.remove()}).always(function(r){show_growl_msg(r)})}),r.on("focus",".project_title",function(){var r=$(this);r.data("orig",r.val())}),r.on("keyup",".project_title",function(r){var o=$(this);if(13==r.keyCode)return o.trigger("blur"),!1;if(27==r.keyCode){var a=o.data("orig");return o.val(a).trigger("blur"),!1}}),r.on("blur",".project_title",function(){var r=$(this),o=r.val(),a=r.closest(".panel"),t=a.attr("data-id");board.project_records[t].title=o;var e={project:board.project_records[t]};e.action="save_project",e.kanban_nonce=$("#kanban_nonce").val(),$.ajax({method:"POST",url:ajaxurl,data:e}).done(function(r){for(var o in board.task_records)$("#task-"+board.task_records[o].id).trigger("populate_project");var e=board.project_records[t],n=$(t_modal_projects_panel.render(e));a.replaceWith(n),$(".collapse",n).addClass("in")}).always(function(r){show_growl_msg(r)})})})}}(jQuery);