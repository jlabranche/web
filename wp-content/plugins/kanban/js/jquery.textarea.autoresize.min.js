!function($){"use strict";var e=["padding","paddingTop","paddingBottom","paddingRight","paddingLeft","border","borderTop","borderBottom","borderRight","borderLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","fontFamily","fontSize","lineHeight","box-sizing"],t=function(e,t){this.$element=$(e),this.$element.data("autoresize-api",this),t=t||{},this.params=$.extend({minHeight:this.$element.height(),maxHeight:~~parseInt(this.$element.css("max-height"),10),defaultHeight:!1,animation:!0,heightCompensation:this.$element.outerHeight()-this.$element.height(),animationDuration:"slow",animationEasing:"swing",onResize:$.noop},this.$element.data(),t),this.params.defaultHeight&&"min"==this.params.defaultHeight&&(this.params.defaultHeight=this.params.minHeight),this.init()};t.prototype={init:function(){var e=this,t=e.$element,i=t.get(0);return"textarea"!==t.prop("tagName").toLowerCase()?(console.error("jQuery.Textarea.Autoresize works only on textarea tags, skipping..."),void console.log("Selected element is: ",t)):(t.addClass("autoresize"),0==e.params.maxHeight&&t.css("overflow","hidden"),e.params.defaultHeight&&(t.on("focus.autoresize",function(){e.setHeight(e.getContentHeight(),e.params.animation)}),t.on("focusout.autoresize",function(){e.setHeight(e.params.defaultHeight,e.params.animation)})),t.on("keydown.autoresize",function(){setTimeout(function(){e.setHeight(e.getContentHeight())},0)}),void t.on("resize.autoresize",function(){setTimeout(function(){e.getMirror().width(t.width()),e.setHeight(e.getContentHeight())},0)}))},destroy:function(){this.getMirror().remove(),this.$element.removeData("autoresize-api"),this.$element.off(".autoresize"),this.$element.removeClass("autoresize"),this.$element.css("overflow",""),this.$element.css("height",""),this.$element.removeAttr("style")},getMirror:function(){var t=this.$element.nextAll(".autoresize-mirror").first();if(!t.length){t=$("<div/>").addClass("autoresize-mirror");for(var i=0;i<e.length;i++)t.css(e[i],this.$element.css(e[i]));t.width(this.$element.width()),this.$element.after(t)}return t.html(this.$element.val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+"<br />"),t},getContentHeight:function(){return this.limitValue(this.getMirror().height(),this.params.minHeight,this.params.maxHeight)},setHeight:function(e,t){var i=this;t?this.$element.stop(!0).animate({height:e+this.params.heightCompensation+"px"},this.params.animationDuration,this.params.animationEasing,function(){i.params.onResize(i.$element,{height:e})}):(this.$element.height(e),this.params.onResize(this.$element,{height:e}))},limitValue:function(e,t,i){return e=0==t||e>t?e:t,e=0==i||i>e?e:i}},$.fn.autoresize=function(e){return this.each(function(){if("destroy"==e){var i;(i=$(this).data("autoresize-api"))?i.destroy():console.error("Can't destroy autoresize api, it's not initialized.")}else new t(this,e)})},$(function(){$("html > head").append($("<style>.autoresize-mirror { display: none; word-wrap: break-word; white-space: pre-wrap; } .autoresize { resize: none; }</style>"))})}(jQuery);