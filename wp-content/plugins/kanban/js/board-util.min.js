function mysql_dt_to_js_date(t){var e=t.split(/[- :]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}function usurp(t){for(var e=t,r=t.childNodes.length-1;r>=0;r--){var s=t.removeChild(t.childNodes[r]);t.parentNode.insertBefore(s,e),e=s}t.parentNode.removeChild(t)}function sanitize(t){for(var e=Array.prototype.slice.apply(t.getElementsByTagName("*"),[0]),r=0;r<e.length;r++)-1==ALLOWED_TAGS.indexOf(e[r].nodeName)&&usurp(e[r])}function sanitizeString(t){var e=document.createElement("div");return e.innerHTML=t,sanitize(e),e.innerHTML}function encode_emails(t){var e=/(<a href(?:(?!<\/a\s*>).)*)?([\w.-]+@[\w.-]+\.[\w.-]+)/gi;return t.replace(e,function(t,e){return e?t:'<a href="mailto:'+t+'"  contenteditable="false">'+t+"</a>"})}function encode_urls(t){var e=/(<a href(?:(?!<\/a\s*>).)*)?(http[^\s\<]+)/gi;return t.replace(e,function(t,e){return t=t.replace("&nbsp;",""),e?t:'<a href="'+$.trim(t)+'"  contenteditable="false" target="_blank">'+$.trim(t)+"</a>"})}function encode_urls_emails(t){t.html(encode_emails(t.html())),t.html(encode_urls(t.html()))}function get_screen_size(){return $("#screen-size :visible").attr("data-size")}function obj_to_arr(t){return $.map(t,function(t,e){return[t]})}function format_hours(t){if(0==t)return"0<small>h</small>";var e=Math.round(60*t),r=Math.floor(e/480),s=e%480,a=Math.floor(s/60),n=s%60,o=Math.floor(n),i="";return r>0&&(i+="{0}<small>d</small>".sprintf(r)),a>0&&(i+="{0}<small>h</small>".sprintf(a)),o>0&&(i+="{0}<small>m</small>".sprintf(o)),""===i&&(i=format_hours(0)),i}function show_growl_msg(t){try{$.bootstrapGrowl(t.data.message,{type:"info",allow_dismiss:!0})}catch(e){}}function add_task_to_status_col(t){if("undefined"==typeof t.estimate_id&&(t.estimate_id=0),"undefined"==typeof t.project_id?t.project_id=0:"undefined"==typeof board.project_records[t.project_id]&&(t.project_id=0),"undefined"==typeof t.user_id_assigned?t.user_id_assigned=0:"undefined"==typeof board.allowed_users()[t.user_id_assigned]&&(t.user_id_assigned=0),"undefined"==typeof t.status_id&&(t.status_id=0),0==t.status_id){if(0==board.settings().show_all_cols)var e=$("#row-tasks .col-tasks:eq(1)");else var e=$("#row-tasks .col-tasks:eq(0)");var r=e.attr("data-status-id");"undefined"!=typeof r&&""!=r&&(t.status_id=r)}"undefined"!=typeof board.status_records()[t.status_id]&&(t.status_color=board.status_records()[t.status_id].color_hex),"undefined"==typeof t.hour_count&&(t.hour_count=0);var s=$(t_card.render({task:t,settings:board.settings(),current_user_can_write:current_user_has_cap("write")}));return s.prependTo("#status-{0}-tasks".sprintf(t.status_id)).board_task(t),$(".col-tasks").matchHeight(),update_task_count(),s}function update_task_count(){$(".col-status").each(function(){var t=$(this),e=t.attr("data-id"),r=$("#status-{0}-tasks .task".sprintf(e)).length;$(".task-count",t).css({visibility:0===r?"hidden":"visible"}).text(r)})}function current_user_has_cap(t){return user_has_cap(t,board.current_user())}function user_has_cap(t,e){try{return e.caps.indexOf(t)<0?!1:!0}catch(r){return!1}}function records_by_position(t){var e=$.map(t,function(t,e){return[t]});return e.sort(function(t,e){return t.position-e.position}),e}var t_col_status=new t($("#t-col-status").html()),t_col_tasks=new t($("#t-col-tasks").html()),t_card=new t($("#t-card").html()),t_card_project=new t($("#t-card-project").html()),t_card_user_assigned_to=new t($("#t-card-user-assigned-to").html()),t_card_task_hours=new t($("#t-card-task-hours").html()),t_card_estimate=new t($("#t-card-estimate").html()),t_card_users_dropdown=new t($("#t-card-users-dropdown").html()),t_card_estimates_dropdown=new t($("#t-card-estimates-dropdown").html()),t_card_projects_dropdown=new t($("#t-card-projects-dropdown").html()),t_modal_projects_panel=new t($("#t-modal-projects-panel").html()),sidebar_w,$last_clicked,timers=[];String.prototype.sprintf=function(){var t=this;for(var e in arguments)t=t.replace("{"+e+"}",arguments[e]);return t},String.prototype.stripslashes=function(){return(this+"").replace(/\\(.?)/g,function(t,e){switch(e){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return e}})},Number.prototype.padZero=function(t){var e=String(this),r="0";for(t=t||2;e.length<t;)e=r+e;return e},Object.size=function(t){var e=0,r;for(r in t)t.hasOwnProperty(r)&&e++;return e};var ALLOWED_TAGS=["STRONG","EM","BR"];