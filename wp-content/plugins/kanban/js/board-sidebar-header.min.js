!function($){$.fn.board_sidebar_header=function(){return this.each(function(){var t=$(this),a=$("#row-tasks, #row-statuses"),s=t.attr("data-id");t.on("click",".toggle-sidebar",function(){t.trigger("toggle")}),t.on("toggle",function(){return a.is(":animated")?!1:void(t.hasClass("is-open")?t.trigger("close"):t.trigger("open"))}),t.on("open",function(){if(t.hasClass("is-open"))return!1;var a=t.attr("data-open");t.trigger("doslide",[a]),t.addClass("is-open")}),t.on("close",function(){if(!t.hasClass("is-open"))return!1;var a=t.attr("data-close");t.trigger("doslide",[a]),t.removeClass("is-open")}),t.on("doslide",function(t,s){return"undefined"==typeof s?!1:void a.animate({left:s},"fast")}),t.on("click",".btn-new-task",function(){var t=$(this);$(".glyphicon",t).toggle();var a={task:{status_id:s},comment:"{0} added the task".sprintf(board.current_user().short_name)};"undefined"!=typeof board.settings().default_estimate&&"undefined"!=typeof board.estimate_records()[board.settings().default_estimate]&&(a.task.estimate_id=board.settings().default_estimate),"undefined"!=typeof board.settings().default_assigned_to&&"undefined"!=typeof board.allowed_users()[board.settings().default_assigned_to]&&(a.task.user_id_assigned=board.settings().default_assigned_to),a.action="save_task",a.kanban_nonce=$("#kanban_nonce").val(),$.ajax({method:"POST",url:ajaxurl,data:a}).done(function(a){$(".glyphicon",t).toggle();try{0===Object.size(board.task_records)&&(board.task_records={}),board.task_records[a.data.task.id]=a.data.task,$task=add_task_to_status_col(a.data.task),$(".task-title",$task).trigger("click").focus()}catch(s){}})}),t.on("click",".btn-empty-status-tasks-modal",function(){var t=$(this),a=t.attr("data-status-title"),a=$("#empty-archive-confirmation-label").attr("data-label").sprintf(a);$("#empty-archive-confirmation-label").text(a);var s=t.attr("data-status-col-id");$("#btn-empty-status-tasks").attr("data-status-col-id",s),$("#modal-empty-archive").modal("show")}),t.on("click","h2",function(a){var e=get_screen_size();if("sm"!=e&&"xs"!=e)return!1;var n=$(this).innerWidth(),i=$(this).offset(),o=a.pageX-i.left;t.hide(),$("#status-{0}-tasks".sprintf(s)).hide();var r=".col-status:first";if(n/2>o)r=t.prev(".col-status"),0===r.length&&(r=$(".col-status:last"));else{var r=t.next(".col-status");0===r.length&&(r=$(".col-status:first"))}var d=r.attr("data-id");r.show(),$("#status-{0}-tasks".sprintf(d)).show()})})}}(jQuery);